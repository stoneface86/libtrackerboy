<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>TBM File Format Specification: Major Revision 0</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>TBM File Format Specification: Major Revision 0</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_definitions">Definitions</a></li>
<li><a href="#_file_extensions">File extensions</a></li>
<li><a href="#_basic_types">Basic Types</a></li>
<li><a href="#_structure">Structure</a></li>
<li><a href="#_header">Header</a>
<ul class="sectlevel2">
<li><a href="#_signature">Signature</a></li>
<li><a href="#_version_major_minor_patch">Version (major, minor, patch)</a></li>
<li><a href="#_revision">Revision</a></li>
<li><a href="#_system">System</a></li>
<li><a href="#_author_information_title_artist_copyright">Author information (title, artist, copyright)</a></li>
<li><a href="#_instrument_and_waveform_counts">Instrument and Waveform counts</a></li>
<li><a href="#_reserved">Reserved</a></li>
</ul>
</li>
<li><a href="#_payload">Payload</a>
<ul class="sectlevel2">
<li><a href="#_blocks">Blocks</a></li>
<li><a href="#_block_types">Block types</a></li>
<li><a href="#_indx_block_format">INDX block format</a></li>
<li><a href="#_comm_block_format">COMM block format</a></li>
<li><a href="#_song_block_format">SONG block format</a></li>
<li><a href="#_inst_block_format">INST block format</a></li>
<li><a href="#_wave_block_format">WAVE block format</a></li>
</ul>
</li>
<li><a href="#_eof">EOF</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is a formal specification of the file format for TrackerBoy
module files, or *.tbm files. This document is for
<span class="underline">major revision 0</span> of the file format.</p>
</div>
<div class="paragraph">
<p>A Module file is a serialized form of the <a href="https://stoneface86.github.io/libtrackerboy/docs/develop/libtrackerboy/data.html#Module">Module</a> object.</p>
</div>
<div class="paragraph">
<p>The libtrackerboy library provides a reference implementation for serializing
and deserialing module files with this format. See the <a href="https://stoneface86.github.io/libtrackerboy/docs/develop/libtrackerboy/io.html">io module</a> for more documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All multi-byte fields in this specification are stored in little-endian
      byte order.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_definitions">Definitions</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Module</dt>
<dd>
<p>A container of songs, instruments and waveforms. Instruments and
waveforms are shared between all songs. A module can store up to 256
songs, 64 instruments and 64 waveforms.</p>
</dd>
<dt class="hdlist1">Order</dt>
<dd>
<p>Song order data, a list of OrderRows that determine each pattern in the
song.</p>
</dd>
<dt class="hdlist1">OrderRow</dt>
<dd>
<p>A track id assignment for each channel. Determines the tracks
which make a pattern.</p>
</dd>
<dt class="hdlist1">Pattern</dt>
<dd>
<p>A collection of Tracks, one for each channel.</p>
</dd>
<dt class="hdlist1">Track</dt>
<dd>
<p>Song data for a single channel. A Track is a list of TrackRows.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_file_extensions">File extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is recommended that the following file extensions are used for files
adhering to this specification:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">*.tbm</dt>
<dd>
<p><span class="underline">T</span>racker<span class="underline">B</span>oy <span class="underline">M</span>odule file</p>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_types">Basic Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below are basic data types used throughout the format</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size (bytes)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 8-bit integer (0-255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiasedUint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 8-bit integer, biased form (1-256)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit Character type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean as an uint8 (0 for false, nonzero for true)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 16-bit integer, in little endian (0-65536)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsigned 32-bit integer, in little endian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LString</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 + <em>length</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length-prefixed UTF-8 string, string data prefixed by a Uint8 <em>length</em></p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_structure">Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A TrackerBoy module consists of a Header and a Payload.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="res/fig-structure-0.svg" alt="File structure">
</div>
<div class="title">Figure 1. TBM File structure</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_header">Header</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The header structure provides valuable information about the data stored in
the payload, as well as versioning information.</p>
</div>
<div class="paragraph">
<p>The table below defines the layout of the Header structure. Reminder that all
multi-byte fields are stored in little-endian. The size of the header is a
fixed 160 bytes, with any unused space marked as reserved. Reserved fields can
be utilized for future revisions of the format.</p>
</div>
<div class="paragraph">
<p>The layout of the header depends on the header revision, located in offset 24.
The following table is for the current revision of the specification.</p>
</div>
<div style="page-break-after: always;"></div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. TBM Header Structure</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char[12]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">signature</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versionMajor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versionMinor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versionPatch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rev</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customFramerate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char[32]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char[32]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">artist</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+92</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char[32]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">copyright</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+124</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">numberOfInstruments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+126</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">numberOfWaveforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Char[32]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserved</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_signature">Signature</h3>
<div class="paragraph">
<p>Every TrackerBoy file begins with this signature:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. TBM Signature format</caption>
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3337%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'\0'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'T'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'R'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'A'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'C'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'K'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'E'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'R'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'B'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'O'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'Y'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'\0'</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>in order to identify the file as a TrackerBoy file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_major_minor_patch">Version (major, minor, patch)</h3>
<div class="paragraph">
<p>Version information is stored as three 4-byte words. This information
determines which version of trackerboy that created the file. Versioning is
maintained by keeping a major and minor version, followed by a patch number.
For example, if the trackerboy version is v1.0.2, then the header&#8217;s version
fields will contain <code>0x1</code> <code>0x0</code> and <code>0x2</code> for major, minor and patch,
respectively.</p>
</div>
</div>
<div class="sect2">
<h3 id="_revision">Revision</h3>
<div class="paragraph">
<p>The <code>rev</code> field marks the file format revision. Starts at 0 and is incremented
whenever there is a change to the format. TrackerBoy is backwards-compatible
with files of this specification. In other words, TrackerBoy can understand any
module whose <code>rev</code> field is the same or less than the current revision.</p>
</div>
</div>
<div class="sect2">
<h3 id="_system">System</h3>
<div class="paragraph">
<p>The system field determines which Game Boy model this module is for. Since the
driver is typically updated every vblank, the system field determines the
framerate, tick rate or vblank interval for the driver. The available choices
are listed in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Valid system values</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tick rate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">systemDmg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DMG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">59.7 Hz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">systemSgb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SGB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">61.1 Hz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">systemCustom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">varies</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If the system is <code>systemCustom</code>, then a custom tick rate is used instead of the
system&#8217;s vblank. The custom tick rate is stored in the <code>customFramerate</code> field
of the header. This custom tick rate must be a positive number and nonzero. The
implementation should default to 30 fps when the custom tick rate does not meet
this criteria.</p>
</div>
<div class="paragraph">
<p>If the system does not match any of these values, then the implementation
should treat the system as the default, <code>systemDmg</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_author_information_title_artist_copyright">Author information (title, artist, copyright)</h3>
<div class="paragraph">
<p>These fields in the header are fixed 32 byte strings. Assume ASCII encoding.
Any unused characters in the string should be set to 0 or <code>\0</code>. Since these
strings are fixed, null-termination is not needed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The size and naming of these strings are identical to the ones in *.gbs
      file format. This is intentional, as exporting to gbs is a planned
      feature.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_instrument_and_waveform_counts">Instrument and Waveform counts</h3>
<div class="paragraph">
<p>The <code>numberOfInstruments</code> and <code>numberOfWaveforms</code> fields determine how many
instruments and waveforms are stored in the payload, respectively. Both of
these fields should be a number in range of 0 to 64.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reserved">Reserved</h3>
<div class="paragraph">
<p>The remainder of the header is the <code>reserved</code> field(s). This is an unused section
that may be utilized in future versions of the format if needed.</p>
</div>
<div class="paragraph">
<p>This field <strong>should</strong> be zeroed but the specification does not require it. The
field can be safely ignored when processing module files.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_payload">Payload</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The payload is located right after the header (offset 160). It contains a
fixed number of "blocks" or tagged data with a size.</p>
</div>
<div class="sect2">
<h3 id="_blocks">Blocks</h3>
<div class="paragraph">
<p>A block in the payload contains three parts: the id, the length and the data.
The format of the block is shown below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Format of a payload block.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Length</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_block_types">Block types</h3>
<div class="paragraph">
<p>Each block has an identifier, which determines the type of data present in the
block. The table below lists all recognized identifiers in the payload.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Block types used in TBM files</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value (Uint32)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"INDX"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x58444E49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Index block, contains ids and names for instruments and waveforms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"COMM"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x4D4D4F43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User set comment data for a module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"SONG"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x474E4F53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container for the module&#8217;s song.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"INST"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x54534E49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container for all instruments in the module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"WAVE"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x45564157</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container for all waveforms in the module</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Thus there are 5 blocks total in the payload, in the following order: INDX,
COMM, SONG, INST, WAVE.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_indx_block_format">INDX block format</h3>
<div class="paragraph">
<p>The INDX block contains the ID and name data for all instruments and waveforms
in the module. This block is composed as an array of <code>Index</code> records, which is
a pair of a <code>Uint8</code> ID and an <code>LString</code> name. The total number of records in
this block is the sum of the <code>numberOfInstruments</code> and <code>numberOfWaveforms</code>
fields from the Header.</p>
</div>
<div class="paragraph">
<p>Instrument index records are stored first, followed by waveform index records.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_comm_block_format">COMM block format</h3>
<div class="paragraph">
<p>The COMM block just contains a UTF-8 string that is the user&#8217;s comment data. The
string is not null-terminated since the length of the string is the length of
the block. If the user has no comment set, then this block is empty
(length = 0).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_song_block_format">SONG block format</h3>
<div class="paragraph">
<p>The SONG block contains the data for module&#8217;s song.</p>
</div>
<div class="paragraph">
<p>Song data is composed of the following, in this order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The name, <code>LString</code></p>
</li>
<li>
<p>A <code>SongFormat</code> record</p>
</li>
<li>
<p>The song order, as an array of <code>OrderRow</code> or <code>Char[4][patternCount]</code></p>
</li>
<li>
<p>The track data, as a sequence of <code>TrackFormat</code> and <code>RowFormat</code> records</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_song_name">Song name</h4>
<div class="paragraph">
<p>The first part of a SONG block is the song&#8217;s name, as an <code>LString</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_songformat">SongFormat</h4>
<div class="paragraph">
<p>Following the name is a <code>SongFormat</code> record:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. The SongFormat record</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiasedUint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowsPerBeat</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiasedUint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowsPerMeasure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">speed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiasedUint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">patternCount</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiasedUint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowsPerTrack</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">numberOfTracks</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">rowsPerBeat</dt>
<dd>
<p>number of rows that make up a beat, used by the front end
for highlighting and tempo calculation.</p>
</dd>
<dt class="hdlist1">rowsPerMeasure</dt>
<dd>
<p>number of rows that make up a measure, used by the front
end for highlighting.</p>
</dd>
<dt class="hdlist1">speed</dt>
<dd>
<p>Initial speed setting for the song in Q4.4 format</p>
</dd>
</dl>
</div>
<div id="SongFormat-patternCount" class="dlist">
<dl>
<dt class="hdlist1">patternCount</dt>
<dd>
<p>number of patterns for the song</p>
</dd>
<dt class="hdlist1">rowsPerTrack</dt>
<dd>
<p>the size, in rows, of a track (all tracks have the same size).</p>
</dd>
<dt class="hdlist1">numberOfTracks</dt>
<dd>
<p>number of tracks stored in this song block.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_song_order">Song Order</h4>
<div class="paragraph">
<p>Next is the song order, an array of <code>OrderRow</code> records with the dimension being
the <a href="#SongFormat-patternCount">patternCount</a> field from the song format record.
An <code>OrderRow</code> record is a set of 4 <code>Uint8</code> track ids, with the first being the
track id for channel 1 and the last being the id for channel 4.</p>
</div>
</div>
<div class="sect3">
<h4 id="_track_data">Track Data</h4>
<div class="paragraph">
<p>Finally, the rest of the block contains the pattern data for every track in the
song. Each track gets its own <code>TrackFormat</code> record and an array of <code>RowFormat</code>
records.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. The TrackFormat record</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">channel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">trackId</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiasedUint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rows</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">channel</dt>
<dd>
<p>determines which channel the track is for. <em>Valid values 0-3</em>.</p>
</dd>
<dt class="hdlist1">trackId</dt>
<dd>
<p>determines the track id to use for this track.</p>
</dd>
<dt class="hdlist1">rows</dt>
<dd>
<p>the number of RowFormat records that follow this structure.</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. The RowFormat record</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowno</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TrackRow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowdata</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">rowno</dt>
<dd>
<p>the index in the track&#8217;s row array to set</p>
</dd>
<dt class="hdlist1">rowdata</dt>
<dd>
<p>the data to set at this index, where the <code>TrackRow</code> type is:</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. The TrackRow structure</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">note</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">instrument</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effect[3]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effects</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>with <code>Effect</code> being:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. The Effect structure</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectType</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectParam</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>and <code>effectType</code> should be any of the following:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. List of valid effect types</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effect Syntax</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etNoEffect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etPatternGoto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etPatternHalt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etPatternSkip</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etSetTempo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Txx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etSfx</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etSetEnvelope</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">V0x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etSetTimbre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I0x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etSetPanning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etSetSweep</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etDelayedCut</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etDelayedNote</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etLock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etArpeggio</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1xx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etPitchUp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2xx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etPitchDown</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3xx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etAutoPortamento</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4xy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etVibrato</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5xx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etVibratoDelay</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etTuning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etNoteSlideUp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">etNoteSlideDown</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The last <code>RowFormat</code> record for the last track ends the <code>SONG</code> block.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_inst_block_format">INST block format</h3>
<div class="paragraph">
<p>The INST block contains instrument data for every instrument in the module.
The data is stored in the same order as the instrument <code>Index</code> records in the
INDX block. Thus the number of instruments contained in this block is the value
of the <code>numberOfInstruments</code> field in the Header.</p>
</div>
<div class="paragraph">
<p>A single instrument&#8217;s data is structured as followed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>An <code>InstrumentFormat</code> record</p>
</li>
<li>
<p>4 sequences each composed of:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A <code>SequenceFormat</code> record</p>
</li>
<li>
<p>The sequence&#8217;s data</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_instrumentformat">InstrumentFormat</h4>
<div class="paragraph">
<p>The <code>InstrumentFormat</code> record defines settings for the instrument.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">channel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">envelopeEnabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">envelope</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">channel</dt>
<dd>
<p>determines which channel the instrument is for, 0 is channel 1, 3 is
channel 4, etc. <em>Valid values 0-3</em>.</p>
</dd>
<dt class="hdlist1">envelopeEnabled</dt>
<dd>
<p>set to true if the instrument has an initial envelope setting.</p>
</dd>
<dt class="hdlist1">envelope</dt>
<dd>
<p>the initial envelope setting that is used if <code>envelopeEnabled</code> was true.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_sequence_data">Sequence data</h4>
<div class="paragraph">
<p>Following the InstrumentFormat record is the sequence data for each of the
instrument&#8217;s sequences. Data for a sequence is structured as a <code>SequenceFormat</code>
record followed by the sequence data. There are four kinds of sequences for
every instrument. The kind of sequence the data is for is determined by its
order in the block:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SequenceKind</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">skArp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">skPanning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">skPitch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">skTimbre</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>SequenceFormat</code> record:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">length</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loopEnabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uint8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loopIndex</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">length</dt>
<dd>
<p>The length of the sequence data. Following this record will be this
number of <code>Uint8</code> bytes that are the sequence&#8217;s data.
<em>Valid values 0-256</em>.</p>
</dd>
<dt class="hdlist1">loopEnabled</dt>
<dd>
<p>Determines if this sequence has a loop index.</p>
</dd>
<dt class="hdlist1">loopIndex</dt>
<dd>
<p>The index of the loop point.</p>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_wave_block_format">WAVE block format</h3>
<div class="paragraph">
<p>The WAVE block contains waveform data for every waveform in the module.
Like the INST block, the data is stored in the same order as the waveform
<code>Index</code> records in the INDX block. Thus the number of waveforms contained in
this block is the value of the <code>numberOfWaveforms</code> field in the Header.</p>
</div>
<div class="paragraph">
<p>A single waveform just contains the 32-bit PCM sample array as an array of
16 <code>Uint8</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eof">EOF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module file should be at end of file (EOF) after the WAVE block.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-05-14 17:23:17 UTC
</div>
</div>
</body>
</html>